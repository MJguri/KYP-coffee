<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout">
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <th:block th:replace="/headerFooter.html :: configFragment"></th:block>

    <title>일별매출</title>
</head>

<body>
    <div th:replace="/headerFooter.html :: top-bar"></div>
    <div th:replace="/headerFooter.html :: admin-header"></div>
    <section class="breadcrumbs">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center">
                <h2>Sales Status</h2>
                <ol>
                    <li><a href="index.html">Admin</a></li>
                    <li><a th:href="@{/salesStatus}">일별매출</a></li>
                    <li><a th:href="@{/salesStatus/month}">월별매출</a></li>
                </ol>
            </div>

        </div>
    </section><!-- End Breadcrumbs -->
    <br><br><br>

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-6 table-responsive">

                <div style="text-align: right">
                    <input type="date" id="payDate" onchange="changeDate(this.value)" th:value="${payDate}">&nbsp;&nbsp;
                </div>

                <h4 style="text-align: center">일별 매출현황</h4>

                <div th:if="${salesList.isEmpty()}" class="card border-0 shadow rounded-3 my-5"> 매출이 없습니다. </div>
                <div th:unless="${salesList.isEmpty()}" class="card border-0 shadow rounded-3 my-5">
                    [[${payDate}]]
                    <hr>
                    <div th:each="list :${salesList}">
                        <th:block th:switch="${list.productType}">
                            <span th:case="-1">총 매출 : </span>
                            <span th:case="1">커피 : </span>
                            <span th:case="2">텀블러 : </span>
                            <span th:case="3">컵 : </span>
                            <span th:case="4">굿즈 : </span>
                        </th:block>
                        <div>
                            [[${list.sum}]]
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <br><br><br>
    <div th:replace="/headerFooter.html :: footer"></div>
    <th:block th:replace="/headerFooter.html :: script"></th:block>

    <script>

        let testDate = document.getElementById('payDate').value
        if (!testDate){
            document.getElementById('payDate').value = new Date().toISOString().substring(0, 10);
        }

        function changeDate(payDate){
            let today = new Date();
            let chooseDay = new Date(payDate);

            if(chooseDay > today){
                alert("미래의 매출을 볼 순 없음");
            }
            else{
                location.href="/salesStatus?payDate="+payDate;
            }
        }

    </script>
</body>
</html>